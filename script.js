// Language Translation System
const translations = {
    en: {
        nav: {
            home: 'HOME',
            about: 'ABOUT',
            modalities: 'MODALITIES',
            contacts: 'CONTACTS',
            services: 'SERVICES'
        },
        hero: {
            title: 'Transform Your Body, Transform Your Life',
            subtitle: 'Welcome to Your Fitness Journey'
        },
        preloader: {
            loading: 'LOADING...'
        },
        about: {
            subtitle: 'ABOUT US',
            title: 'YOUR FITNESS JOURNEY STARTS HERE',
            text1: 'Welcome to ColoqueNomeDasuaempresa, where fitness meets excellence. We are more than just a gym - we are your partners in achieving a healthier, stronger, and more confident version of yourself. Our state-of-the-art facilities, expert trainers, and diverse range of programs are designed to support you every step of the way.',
            text2: 'Whether you are just starting your fitness journey or looking to take your training to the next level, we have everything you need. From personalized training programs to group classes that motivate and inspire, our commitment is to help you reach your goals in a supportive and welcoming environment.',
            button: 'START YOUR JOURNEY TODAY!',
            feature1: {
                title: 'NEW FACILITIES',
                desc: 'With renovated, elegant and functional spaces, we have created a modern environment, designed for your comfort and to further elevate your training experience.'
            },
            feature2: {
                title: 'NEW EQUIPMENT',
                desc: 'Equipment for all goals. With the latest technology, we guarantee workouts adapted to your goals, whether they are strength, endurance or balance.'
            },
            feature3: {
                title: 'NEW SERVICES',
                desc: 'Experience a new approach to wellness. The new services offer you innovative and personalized solutions to meet your needs.'
            },
            feature4: {
                title: 'NEW MODALITIES',
                desc: 'Find group classes for all tastes and goals. The new modalities were designed to diversify your routine and provide you with unique challenges.'
            }
        },
        modalities: {
            title: 'Explore our modalities',
            description: 'Discover all the options we have for you',
            personalTrainer: {
                title: 'Personal Trainer',
                subtitle: 'Personalized and individualized training'
            },
            groupClasses: {
                title: 'Group Classes',
                subtitle: 'CrossFit, Pilates, Yoga and much more'
            },
            nutrition: {
                title: 'Nutritional Counseling',
                subtitle: 'Personalized meal plans'
            },
            bodybuilding: {
                title: 'Bodybuilding',
                subtitle: 'Modern equipment and spacious areas'
            },
            cardio: {
                title: 'Cardio',
                subtitle: 'State-of-the-art machines'
            },
            pilates: {
                title: 'Pilates',
                subtitle: 'Group and individual classes'
            },
            yoga: {
                title: 'Yoga',
                subtitle: 'Body and mind balance'
            },
            crossfit: {
                title: 'CrossFit',
                subtitle: 'High-intensity functional training'
            },
            button: 'SEE MORE'
        },
        partnership: {
            title: 'Ready to Transform Your Life?',
            text: 'Join our community of fitness enthusiasts and start your transformation today. At ColoqueNomeDasuaempresa, we believe that everyone deserves to feel their best. Our comprehensive programs, expert guidance, and supportive community are here to help you achieve your fitness goals and unlock your full potential.',
            button1: 'GET STARTED NOW',
            button2: 'CONTACT US'
        },
        faq: {
            title: 'Frequently Asked Questions',
            description: 'Everything you need to know to start your fitness journey with us',
            q1: 'How do I become a member?',
            a1: 'Becoming a member is easy! You can sign up online through our website, visit us in person at the club, or call us at +351 252 023 493. We offer flexible membership plans to suit your lifestyle and fitness goals. Our team will be happy to help you choose the perfect plan for you.',
            q2: 'What are your operating hours?',
            a2: 'We are open Monday through Friday from 6:30 AM to 11:00 PM, and on weekends from 8:00 AM to 10:00 PM. Our extended hours ensure you can fit your workout into your busy schedule, no matter how packed your day is.',
            q3: 'Can I try before I commit?',
            a3: 'Absolutely! We offer free trial classes and facility tours so you can experience everything we have to offer before making a commitment. Contact us to schedule your complimentary trial session and see why we are the perfect fit for your fitness journey.',
            q4: 'What types of classes and services do you offer?',
            a4: 'We offer a comprehensive range of fitness options including Personal Training, Group Classes (CrossFit, Pilates, Yoga), Bodybuilding, Cardio Equipment, and Nutritional Counseling. Our diverse offerings ensure there is something for everyone, regardless of your fitness level or goals.',
            q5: 'What should I bring to my workout?',
            a5: 'Please bring a towel for your workout - it is required for hygiene and safety. We also recommend bringing a padlock for the lockers, though some are available at the club. Comfortable workout attire and a water bottle are also essential for a great training session.',
            q6: 'How do I cancel or modify my membership?',
            a6: 'You can cancel or modify your membership by visiting the club in person or contacting us via email at apoioaocliente@fitnessup.pt or phone at +351 252 023 493. We require 30 days notice for cancellations. Our team is always available to discuss your membership options.',
            q7: 'Is parking available?',
            a7: 'Yes! We are located in C.C. E-Leclerc with free parking available for all members. The parking is accessible during all shopping center operating hours, making it convenient for you to visit us at any time.',
            q8: 'Do you provide personalized training programs?',
            a8: 'Yes! Our Personal Trainer service offers fully customized training programs tailored to your specific goals, fitness level, and preferences. We also provide nutritional counseling to complement your training and help you achieve optimal results. Our expert trainers work closely with you to ensure you reach your full potential.'
        },
        footer: {
            usefulLinks: 'Useful Links',
            contacts: 'Contacts',
            copyright: 'Copyright © ColoqueNomeDasuaempresa 2024'
        },
        
        cookie: {
            title: 'Manage Consent',
            text: 'To provide the best experiences, we use technologies like cookies to store and/or access device information. Consenting to these technologies will allow us to process data such as browsing behavior or unique IDs on this site. Not consenting or withdrawing consent may adversely affect certain features and functions.',
            accept: 'Accept',
            reject: 'Reject'
        }
    },

    pt: {
        nav: {
            home: 'HOME',
            about: 'SOBRE',
            modalities: 'MODALIDADES',
            contacts: 'CONTACTOS',
            services: 'SERVIÇOS'
        },
        hero: {
            title: 'Transforma o Teu Corpo, Transforma a Tua Vida',
            subtitle: 'Bem-vindo à Tua Jornada de Fitness'
        },
        preloader: {
            loading: 'A CARREGAR...'
        },
        about: {
            subtitle: 'SOBRE NÓS',
            title: 'A TUA JORNADA DE FITNESS COMEÇA AQUI',
            text1: 'Bem-vindo à ColoqueNomeDasuaempresa, onde o fitness encontra a excelência. Somos mais do que um ginásio - somos os teus parceiros para alcançares uma versão mais saudável, forte e confiante de ti mesmo. As nossas instalações modernas, treinadores especializados e programas diversificados foram concebidos para te apoiar em cada passo do caminho.',
            text2: 'Quer estejas a começar a tua jornada de fitness ou a procurar elevar o teu treino a um novo nível, temos tudo o que precisas. Desde programas de treino personalizados até aulas de grupo que motivam e inspiram, o nosso compromisso é ajudar-te a alcançar os teus objetivos num ambiente acolhedor e de apoio.',
            button: 'COMEÇA A TUA JORNADA HOJE!',
            feature1: {
                title: 'NOVAS INSTALAÇÕES',
                desc: 'Com espaços renovados, elegantes e funcionais, criámos um ambiente moderno, pensado para o teu conforto e para elevar ainda mais a tua experiência de treino.'
            },
            feature2: {
                title: 'NOVOS EQUIPAMENTOS',
                desc: 'Equipamentos para todos os objetivos. Com as mais recentes tecnologia, garantimos treinos adaptados às tuas metas, sejam elas força, resistência ou equilíbrio.'
            },
            feature3: {
                title: 'NOVOS SERVIÇOS',
                desc: 'Experimenta uma nova abordagem ao bem-estar. Os novos serviços oferecem-te soluções inovadoras e personalizadas para responder às tuas necessidades.'
            },
            feature4: {
                title: 'NOVAS MODALIDADES',
                desc: 'Encontra aulas de grupo para todos os gostos e objetivos. As novas modalidades foram concebidas para diversificar a tua rotina e proporcionar-te desafios únicos.'
            }
        },
        modalities: {
            title: 'Explore as nossas modalidades',
            description: 'Descobre todas as opções que temos para ti',
            personalTrainer: {
                title: 'Personal Trainer',
                subtitle: 'Treino personalizado e individualizado'
            },
            groupClasses: {
                title: 'Aulas em Grupo',
                subtitle: 'CrossFit, Pilates, Yoga e muito mais'
            },
            nutrition: {
                title: 'Aconselhamento Nutricional',
                subtitle: 'Planos alimentares personalizados'
            },
            bodybuilding: {
                title: 'Musculação',
                subtitle: 'Equipamentos modernos e espaços amplos'
            },
            cardio: {
                title: 'Cardio',
                subtitle: 'Máquinas de última geração'
            },
            pilates: {
                title: 'Pilates',
                subtitle: 'Aulas de grupo e individuais'
            },
            yoga: {
                title: 'Yoga',
                subtitle: 'Equilíbrio corpo e mente'
            },
            crossfit: {
                title: 'CrossFit',
                subtitle: 'Treino funcional de alta intensidade'
            },
            button: 'VER MAIS'
        },
        partnership: {
            title: 'Pronto para Transformar a Tua Vida?',
            text: 'Junta-te à nossa comunidade de entusiastas de fitness e começa a tua transformação hoje. Na ColoqueNomeDasuaempresa, acreditamos que todos merecem sentir-se no seu melhor. Os nossos programas abrangentes, orientação especializada e comunidade de apoio estão aqui para te ajudar a alcançar os teus objetivos de fitness e desbloquear todo o teu potencial.',
            button1: 'COMEÇA AGORA',
            button2: 'FALA CONNOSCO'
        },
        faq: {
            title: 'Perguntas Frequentes',
            description: 'Tudo o que precisas de saber para começar a tua jornada de fitness connosco',
            q1: 'Como posso tornar-me sócio?',
            a1: 'Tornar-te sócio é muito simples! Podes inscrever-te online através do nosso website, visitar-nos presencialmente no clube, ou contactar-nos pelo telefone +351 252 023 493. Oferecemos planos de adesão flexíveis adaptados ao teu estilo de vida e objetivos de fitness. A nossa equipa terá todo o gosto em ajudar-te a escolher o plano perfeito para ti.',
            q2: 'Quais são os vossos horários de funcionamento?',
            a2: 'Estamos abertos de segunda a sexta-feira das 6h30 às 23h00, e aos fins de semana das 8h00 às 22h00. Os nossos horários alargados garantem que podes encaixar o teu treino na tua agenda ocupada, independentemente de quão cheio esteja o teu dia.',
            q3: 'Posso experimentar antes de me comprometer?',
            a3: 'Claro! Oferecemos aulas experimentais gratuitas e visitas às instalações para que possas experimentar tudo o que temos para oferecer antes de te comprometeres. Contacta-nos para agendares a tua sessão experimental gratuita e descobrires porque somos a escolha perfeita para a tua jornada de fitness.',
            q4: 'Que tipos de aulas e serviços oferecem?',
            a4: 'Oferecemos uma gama abrangente de opções de fitness incluindo Personal Trainer, Aulas em Grupo (CrossFit, Pilates, Yoga), Musculação, Equipamentos de Cardio, e Aconselhamento Nutricional. A nossa oferta diversificada garante que há algo para todos, independentemente do teu nível de fitness ou objetivos.',
            q5: 'O que devo trazer para o meu treino?',
            a5: 'Por favor, traz uma toalha para o teu treino - é obrigatória por questões de higiene e segurança. Também recomendamos que tragas um cadeado para os cacifos, embora alguns estejam disponíveis no clube. Roupa confortável para treino e uma garrafa de água são também essenciais para uma excelente sessão de treino.',
            q6: 'Como posso cancelar ou modificar a minha adesão?',
            a6: 'Podes cancelar ou modificar a tua adesão visitando o clube presencialmente ou contactando-nos via email em apoioaocliente@fitnessup.pt ou telefone em +351 252 023 493. Exigimos um aviso prévio de 30 dias para cancelamentos. A nossa equipa está sempre disponível para discutir as tuas opções de adesão.',
            q7: 'Há estacionamento disponível?',
            a7: 'Sim! Estamos localizados no C.C. E-Leclerc com estacionamento gratuito disponível para todos os sócios. O estacionamento está acessível durante todo o horário de funcionamento do centro comercial, tornando conveniente a tua visita a qualquer hora.',
            q8: 'Oferecem programas de treino personalizados?',
            a8: 'Sim! O nosso serviço de Personal Trainer oferece programas de treino totalmente personalizados adaptados aos teus objetivos específicos, nível de fitness e preferências. Também fornecemos aconselhamento nutricional para complementar o teu treino e ajudar-te a alcançar resultados ótimos. Os nossos treinadores especializados trabalham em estreita colaboração contigo para garantir que alcanças todo o teu potencial.'
        },
        footer: {
            usefulLinks: 'Links Úteis',
            contacts: 'Contactos',
            copyright: 'Copyright © ColoqueNomeDasuaempresa 2024'
        },
        cookie: {
            title: 'Gerir o Consentimento',
            text: 'Para fornecer as melhores experiências, usamos tecnologias como cookies para armazenar e/ou aceder a informações do dispositivo. Consentir com essas tecnologias nos permitirá processar dados, como comportamento de navegação ou IDs exclusivos neste site. Não consentir ou retirar o consentimento pode afetar negativamente certos recursos e funções.',
            accept: 'Aceitar',
            reject: 'Recusar'
        }
    }
};

let currentLanguage = localStorage.getItem('language') || 'en';

function setLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('language', lang);
    document.documentElement.lang = lang;
    
    // Update language button
    const langBtn = document.getElementById('languageBtn');
    if (langBtn) {
        const langCode = langBtn.querySelector('.language-code');
        const flagIcon = langBtn.querySelector('.flag-icon');
        
        if (langCode) langCode.textContent = lang.toUpperCase();
        if (flagIcon) flagIcon.className = `flag-icon flag-${lang}`;
    }
    
    // Translate all elements with data-translate attribute
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        const keys = key.split('.');
        let translation = translations[lang];
        
        for (const k of keys) {
            translation = translation?.[k];
        }
        
        if (translation) {
            // Handle different element types
            if (element.tagName === 'INPUT' && element.type === 'text') {
                element.placeholder = translation;
            } else if (element.tagName === 'INPUT' && element.type === 'submit') {
                element.value = translation;
            } else if (element.tagName === 'TEXTAREA') {
                element.placeholder = translation;
            } else {
                element.textContent = translation;
            }
        }
    });
    
    // Update page title
    document.title = `ColoqueNomeDasuaempresa | Collections`;
}

// Language Selector
const languageBtn = document.getElementById('languageBtn');
const languageDropdown = document.getElementById('languageDropdown');

if (languageBtn) {
    languageBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        document.querySelector('.language-selector').classList.toggle('active');
    });
}

if (languageDropdown) {
    languageDropdown.querySelectorAll('.language-option').forEach(option => {
        option.addEventListener('click', (e) => {
            e.stopPropagation();
            const lang = option.getAttribute('data-lang');
            setLanguage(lang);
            document.querySelector('.language-selector').classList.remove('active');
        });
    });
}

// Close dropdown when clicking outside
document.addEventListener('click', (e) => {
    if (!e.target.closest('.language-selector')) {
        document.querySelector('.language-selector')?.classList.remove('active');
    }
});

// Initialize language on page load
setLanguage(currentLanguage);

// Preloader
window.addEventListener('load', () => {
    const preloader = document.getElementById('preloader');
    setTimeout(() => {
        preloader.classList.add('hidden');
    }, 500);
});

// Video Control
const heroVideo = document.querySelector('.hero-video');
if (heroVideo) {
    // Garantir que o vídeo está a reproduzir
    heroVideo.addEventListener('loadedmetadata', () => {
        heroVideo.play().catch(error => {
            console.log('Autoplay impedido:', error);
        });
    });

    // Pausar vídeo quando não está visível (para poupar recursos)
    const observerOptions = {
        root: null,
        rootMargin: '0px',
        threshold: 0.5
    };

    const videoObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                heroVideo.play().catch(error => {
                    console.log('Erro ao reproduzir vídeo:', error);
                });
            }
        });
    }, observerOptions);

    videoObserver.observe(heroVideo);

    // Fallback: se o vídeo não carregar, usar imagem de fundo
    heroVideo.addEventListener('error', () => {
        console.log('Erro ao carregar vídeo, usando fallback');
        heroVideo.style.display = 'none';
    });
}

// Mobile Menu Toggle
const menuToggle = document.querySelector('.menu-toggle');
const navMenu = document.querySelector('.nav-menu');

if (menuToggle) {
    menuToggle.addEventListener('click', () => {
        navMenu.classList.toggle('active');
    });
}

// Close mobile menu when clicking on a link
document.querySelectorAll('.nav-menu a').forEach(link => {
    link.addEventListener('click', () => {
        navMenu.classList.remove('active');
    });
});

// Hero Navigation Arrows
const navArrowLeft = document.querySelector('.nav-arrow-left');
const navArrowRight = document.querySelector('.nav-arrow-right');

if (navArrowLeft) {
    navArrowLeft.addEventListener('click', () => {
        const catalogSection = document.getElementById('catalogo');
        if (catalogSection) {
            catalogSection.scrollIntoView({ behavior: 'smooth' });
        }
    });
}

if (navArrowRight) {
    navArrowRight.addEventListener('click', () => {
        const catalogSection = document.getElementById('catalogo');
        if (catalogSection) {
            catalogSection.scrollIntoView({ behavior: 'smooth' });
        }
    });
}

// Update active nav link on scroll
let ticking = false;

function updateActiveNavLink() {
    const sections = document.querySelectorAll('section[id]');
    const scrollY = window.pageYOffset || window.scrollY;
    const headerOffset = 150;

    let currentSection = '';
    sections.forEach(section => {
        const sectionTop = section.offsetTop - headerOffset;
        const sectionHeight = section.offsetHeight;
        const sectionId = section.getAttribute('id');

        if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
            currentSection = sectionId;
        }
    });

    document.querySelectorAll('.nav-menu a').forEach(link => {
        link.classList.remove('active');
        const href = link.getAttribute('href');
        if (href === `#${currentSection}` || (currentSection === 'home' && href === '#home')) {
            link.classList.add('active');
        }
    });

    ticking = false;
}

window.addEventListener('scroll', () => {
    if (!ticking) {
        window.requestAnimationFrame(updateActiveNavLink);
        ticking = true;
    }
});

// Initial call
updateActiveNavLink();

// Modal Functions
function openModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }
}

function closeModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.classList.remove('active');
        document.body.style.overflow = 'auto';
    }
}

// Close modal when clicking outside
document.querySelectorAll('.modal').forEach(modal => {
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }
    });
});

// Close modal with X button
document.querySelectorAll('.modal-close').forEach(closeBtn => {
    closeBtn.addEventListener('click', () => {
        const modal = closeBtn.closest('.modal');
        if (modal) {
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }
    });
});

// Open modals from buttons
document.querySelectorAll('[data-modal]').forEach(button => {
    button.addEventListener('click', (e) => {
        e.preventDefault();
        const modalId = button.getAttribute('data-modal');
        if (modalId === 'workout') {
            openModal('workoutModal');
        } else if (modalId === 'contact') {
            openModal('contactModal');
        } else if (modalId === 'nutrition') {
            openModal('nutritionModal');
        }
    });
});

// Form Submissions
const workoutForm = document.getElementById('workoutForm');
if (workoutForm) {
    workoutForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const formData = new FormData(workoutForm);
        const name = workoutForm.querySelector('input[type="text"]')?.value || 'NOME';
        
        closeModal('workoutModal');
        showSuccessMessage(name, 'O teu pedido foi registado com sucesso. Em breve, serás contactado/a pela Tribo UP!');
        workoutForm.reset();
    });
}

const contactForm = document.getElementById('contactForm');
if (contactForm) {
    contactForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const nameInput = contactForm.querySelector('input[type="text"]');
        const name = nameInput?.value || 'NOME';
        
        closeModal('contactModal');
        showSuccessMessage(name, 'O teu contacto foi registado com sucesso. Em breve entraremos em contacto contigo.');
        contactForm.reset();
    });
}

const nutritionForm = document.getElementById('nutritionForm');
if (nutritionForm) {
    nutritionForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const nameInput = nutritionForm.querySelector('input[type="text"]');
        const name = nameInput?.value || 'NOME';
        
        closeModal('nutritionModal');
        showSuccessMessage(name, 'O teu pedido foi registado com sucesso. Em breve, serás contactado/a pela Tribo UP!');
        nutritionForm.reset();
    });
}

const ctaForm = document.getElementById('ctaForm');
if (ctaForm) {
    ctaForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const nameInput = ctaForm.querySelector('input[type="text"]');
        const name = nameInput?.value || 'NOME';
        
        showSuccessMessage(name, 'O teu contacto foi registado com sucesso. Em breve entraremos em contacto contigo.');
        ctaForm.reset();
    });
}

// Success Message
function showSuccessMessage(name, message) {
    const successMessage = document.getElementById('successMessage');
    const successName = document.getElementById('successName');
    const successText = document.getElementById('successText');
    
    if (successMessage && successName && successText) {
        successName.textContent = name;
        successText.textContent = message;
        successMessage.classList.add('active');
        document.body.style.overflow = 'hidden';
    }
}

function closeSuccessMessage() {
    const successMessage = document.getElementById('successMessage');
    if (successMessage) {
        successMessage.classList.remove('active');
        document.body.style.overflow = 'auto';
    }
}

// Close success message with X button
const successClose = document.querySelector('.success-close');
if (successClose) {
    successClose.addEventListener('click', () => {
        closeSuccessMessage();
    });
}

// Close success message when clicking outside
const successMessage = document.getElementById('successMessage');
if (successMessage) {
    successMessage.addEventListener('click', (e) => {
        if (e.target === successMessage) {
            closeSuccessMessage();
        }
    });
}


// Smooth scroll for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        const href = this.getAttribute('href');
        if (href !== '#' && href.length > 1) {
            e.preventDefault();
            const target = document.querySelector(href);
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        }
    });
});

// Add loading state to buttons
document.querySelectorAll('form').forEach(form => {
    form.addEventListener('submit', function(e) {
        const submitButton = this.querySelector('button[type="submit"]');
        if (submitButton) {
            const originalText = submitButton.textContent;
            submitButton.textContent = 'Aguarde, a enviar contato!';
            submitButton.disabled = true;
            
            // Reset after a delay (in real app, this would be after API response)
            setTimeout(() => {
                submitButton.textContent = originalText;
                submitButton.disabled = false;
            }, 2000);
        }
    });
});

// Club card interactions
document.querySelectorAll('[data-club]').forEach(button => {
    button.addEventListener('click', function() {
        const clubName = this.closest('.club-card').querySelector('h3').textContent;
        alert(`Informações sobre ${clubName}\n\nEm breve terás mais informações sobre este clube!`);
    });
});

// FAQ Accordion
document.querySelectorAll('.faq-question').forEach(question => {
    question.addEventListener('click', function() {
        const faqItem = this.closest('.faq-item');
        const isActive = faqItem.classList.contains('active');
        
        // Fechar todos os outros itens
        document.querySelectorAll('.faq-item').forEach(item => {
            if (item !== faqItem) {
                item.classList.remove('active');
            }
        });
        
        // Toggle do item atual
        if (isActive) {
            faqItem.classList.remove('active');
        } else {
            faqItem.classList.add('active');
        }
    });
});

// Cookie Consent Management
const cookieConsent = document.getElementById('cookieConsent');
const acceptCookiesBtn = document.getElementById('acceptCookies');
const rejectCookiesBtn = document.getElementById('rejectCookies');

// Verificar se o consentimento já foi dado
function checkCookieConsent() {
    const consent = localStorage.getItem('cookieConsent');
    if (!consent) {
        // Mostrar banner após um pequeno delay
        setTimeout(() => {
            cookieConsent.classList.add('show');
        }, 1000);
    }
}

// Aceitar todos os cookies
if (acceptCookiesBtn) {
    acceptCookiesBtn.addEventListener('click', () => {
        localStorage.setItem('cookieConsent', 'accepted');
        localStorage.setItem('essentialCookies', 'true');
        localStorage.setItem('analyticsCookies', 'true');
        localStorage.setItem('marketingCookies', 'true');
        cookieConsent.classList.remove('show');
    });
}

// Recusar cookies não essenciais
if (rejectCookiesBtn) {
    rejectCookiesBtn.addEventListener('click', () => {
        localStorage.setItem('cookieConsent', 'rejected');
        localStorage.setItem('essentialCookies', 'true');
        localStorage.setItem('analyticsCookies', 'false');
        localStorage.setItem('marketingCookies', 'false');
        cookieConsent.classList.remove('show');
    });
}

// Verificar consentimento ao carregar a página
checkCookieConsent();